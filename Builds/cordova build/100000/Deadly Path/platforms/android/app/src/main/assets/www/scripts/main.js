'use strict';function t(h,a,b,d){h.A.dc(h.Ta,a,b,d,void 0)}function C(h,a,b,d){h.A.oa?t(h,a,b,d):h.A.ff()._OnMessageFromDOM({type:"event",component:h.Ta,handler:a,dispatchOpts:d||null,data:b,responseId:null})}function D(h,a,b){h.A.B(h.Ta,a,b)}function E(h,a){for(const [b,d]of a)D(h,b,d)}function F(h){h.Jb||(h.A.Oe(h.Vd),h.Jb=!0)}window.pa=class{constructor(h,a){this.A=h;this.Ta=a;this.Jb=!1;this.Vd=()=>this.Ba()}Yc(){}Ba(){}};function G(h){-1!==h.Ma&&(self.clearTimeout(h.Ma),h.Ma=-1)}
window.Fe=class{constructor(h,a){this.Dc=h;this.yg=a;this.Ma=-1;this.Kb=-Infinity;this.Wd=()=>{this.Ma=-1;this.Kb=Date.now();this.Ya=!0;this.Dc();this.Ya=!1};this.Fd=this.Ya=!1}c(){G(this);this.Wd=this.Dc=null}};"use strict";function I(h,a){D(h,"get-element",b=>{const d=h.ca.get(b.elementId);return a(d,b)})}
window.Vg=class extends self.pa{constructor(h,a){super(h,a);this.ca=new Map;this.Cc=!0;E(this,[["create",()=>{throw Error("required override");}],["destroy",b=>{{b=b.elementId;const d=this.ca.get(b);this.Cc&&d.parentElement.removeChild(d);this.ca.delete(b)}}],["set-visible",b=>{this.Cc&&(this.ca.get(b.elementId).style.display=b.isVisible?"":"none")}],["update-position",b=>{if(this.Cc){var d=this.ca.get(b.elementId);d.style.left=b.left+"px";d.style.top=b.top+"px";d.style.width=b.width+"px";d.style.height=
b.height+"px";b=b.fontSize;null!==b&&(d.style.fontSize=b+"em")}}],["update-state",b=>{this.ca.get(b.elementId);throw Error("required override");}],["focus",b=>this.xc(b)],["set-css-style",b=>{this.ca.get(b.elementId).style[b.prop]=b.val}],["set-attribute",b=>{this.ca.get(b.elementId).setAttribute(b.name,b.val)}],["remove-attribute",b=>{this.ca.get(b.elementId).removeAttribute(b.name)}]]);I(this,b=>b)}xc(h){var a=this.ca.get(h.elementId);h.focus?a.focus():a.blur()}};"use strict";
{const h=/(iphone|ipod|ipad|macos|macintosh|mac os x)/i.test(navigator.userAgent);function a(x){if(x.Mg){const g=document.createElement("script");g.async=!1;g.textContent=x.Pg;document.head.appendChild(g)}else return new Promise((g,l)=>{const c=document.createElement("script");c.onload=g;c.onerror=l;c.async=!1;c.src=x;document.head.appendChild(c)})}let b=new Audio;const d={"audio/webm; codecs=opus":!!b.canPlayType("audio/webm; codecs=opus"),"audio/ogg; codecs=opus":!!b.canPlayType("audio/ogg; codecs=opus"),
"audio/webm; codecs=vorbis":!!b.canPlayType("audio/webm; codecs=vorbis"),"audio/ogg; codecs=vorbis":!!b.canPlayType("audio/ogg; codecs=vorbis"),"audio/mp4":!!b.canPlayType("audio/mp4"),"audio/mpeg":!!b.canPlayType("audio/mpeg")};b=null;async function f(x){x=await n(x);return(new TextDecoder("utf-8")).decode(x)}function n(x){return new Promise((g,l)=>{const c=new FileReader;c.onload=e=>g(e.target.result);c.onerror=e=>l(e);c.readAsArrayBuffer(x)})}const q=[];let r=0;window.RealFile=window.File;const v=
[],y=new Map,w=new Map;let z=0;const B=[];self.ah=function(x){if("function"!==typeof x)throw Error("runOnStartup called without a function");B.push(x)};const A=new Set(["cordova","playable-ad","instant-games"]);window.sa=class x{constructor(g){this.oa=g.Rg;this.ma=null;this.W="";this.Sc=g.Og;this.mb={};this.Fa=this.lb=null;this.Hb=[];this.$a=this.I=this.Ka=null;this.Ja=-1;this.Hg=()=>this.Gf();this.Ia=[];this.J=g.Xd;!this.oa||"undefined"!==typeof OffscreenCanvas&&navigator.userActivation||(this.oa=
!1);A.has(this.J)&&this.oa&&(console.warn("[C3 runtime] Worker mode is enabled and supported, but is disabled in WebViews due to crbug.com/923007. Reverting to DOM mode."),this.oa=!1);this.Vc=!1;this.Mb=this.ha=null;"html5"!==this.J&&"playable-ad"!==this.J||"file"!==location.protocol.substr(0,4)||alert("Exported games won't work until you upload them. (When running on the file: protocol, browsers block many features from working for security reasons.)");this.B("runtime","cordova-fetch-local-file",
l=>this.pf(l));this.B("runtime","create-job-worker",()=>this.qf());"cordova"===this.J?document.addEventListener("deviceready",()=>this.td(g)):this.td(g)}c(){this.kc();this.ma&&(this.ma=this.ma.onmessage=null);this.lb&&(this.lb.terminate(),this.lb=null);this.Fa&&(this.Fa.c(),this.Fa=null);this.I&&(this.I.parentElement.removeChild(this.I),this.I=null)}ed(){return h&&"cordova"===this.J}qb(){return h&&A.has(this.J)||navigator.standalone}async td(g){if("playable-ad"===this.J){this.ha=self.c3_base64files;
this.Mb={};await this.Ue();for(let c=0,e=g.Na.length;c<e;++c){var l=g.Na[c].toLowerCase();this.Mb.hasOwnProperty(l)?g.Na[c]={Mg:!0,Pg:this.Mb[l]}:this.ha.hasOwnProperty(l)&&(g.Na[c]=URL.createObjectURL(this.ha[l]))}}g.Jg?this.W=g.Jg:(l=location.origin,this.W=("null"===l?"file:///":l)+location.pathname,l=this.W.lastIndexOf("/"),-1!==l&&(this.W=this.W.substr(0,l+1)));if(g.Tg)for(const [c,e]of Object.entries(g.Tg))this.mb[c]=URL.createObjectURL(e);l=new MessageChannel;this.ma=l.port1;this.ma.onmessage=
c=>this._OnMessageFromRuntime(c.data);window.c3_addPortMessageHandler&&window.c3_addPortMessageHandler(c=>this.Cf(c));this.$a=new self.Be(this);await this.$a.xe();this.fd();"object"===typeof window.StatusBar&&window.StatusBar.hide();"object"===typeof window.AndroidFullScreen&&window.AndroidFullScreen.immersiveMode();await this.rg();this.oa?await this.jf(g,l.port2):await this.hf(g,l.port2)}nc(g){return this.mb.hasOwnProperty(g)?this.mb[g]:g.endsWith("/workermain.js")&&this.mb.hasOwnProperty("workermain.js")?
this.mb["workermain.js"]:"playable-ad"===this.J&&this.ha.hasOwnProperty(g.toLowerCase())?URL.createObjectURL(this.ha[g.toLowerCase()]):g}async Xb(g,l,c){if(g.startsWith("blob:"))return new Worker(g,c);if(this.ed()&&"file:"===location.protocol)return g=await this.Wb(this.Sc+g),new Worker(URL.createObjectURL(new Blob([g],{type:"application/javascript"})),c);g=new URL(g,l);if(location.origin!==g.origin){g=await fetch(g);if(!g.ok)throw Error("failed to fetch worker script");g=await g.blob();return new Worker(URL.createObjectURL(g),
c)}return new Worker(g,c)}fd(){if(this.qb()){const g=document.documentElement.style,l=document.body.style,c=window.innerWidth<window.innerHeight,e=c?window.screen.width:window.screen.height;l.height=g.height=(c?window.screen.height:window.screen.width)+"px";l.width=g.width=e+"px"}}qd(g){return{baseUrl:this.W,windowInnerWidth:window.innerWidth,windowInnerHeight:window.innerHeight,devicePixelRatio:window.devicePixelRatio,isFullscreen:x.cc(),projectData:g.$g,previewImageBlobs:window.cr_previewImageBlobs||
this.ha,previewProjectFileBlobs:window.cr_previewProjectFileBlobs,exportType:g.Xd,isDebug:-1<self.location.search.indexOf("debug"),ife:!!self.Zg,jobScheduler:this.$a.ve(),supportedAudioFormats:d,opusWasmScriptUrl:window.cr_opusWasmScriptUrl||this.Sc+"opus.wasm.js",opusWasmBinaryUrl:window.cr_opusWasmBinaryUrl||this.Sc+"opus.wasm.wasm",isiOSCordova:this.ed(),isiOSWebView:this.qb(),isFBInstantAvailable:"undefined"!==typeof self.FBInstant}}async jf(g,l){var c=this.nc(g.Sg);this.lb=await this.Xb(c,this.W,
{name:"Runtime"});this.I=document.createElement("canvas");this.I.style.display="none";c=this.I.transferControlToOffscreen();document.body.appendChild(this.I);window.c3canvas=this.I;this.lb.postMessage(Object.assign(this.qd(g),{type:"init-runtime",isInWorker:!0,messagePort:l,canvas:c,workerDependencyScripts:g.Xc||[],engineScripts:g.Na,projectScripts:window.Yg,projectScriptsStatus:self.C3_ProjectScriptsStatus}),[l,c,...this.$a.we()]);this.Hb=v.map(e=>new e(this));this.pd();self.c3_callFunction=(e,k)=>
this.Ka.kf(e,k);"preview"===this.J&&(self.goToLastErrorScript=()=>this.dc("runtime","go-to-last-error-script"))}async hf(g,l){this.I=document.createElement("canvas");this.I.style.display="none";document.body.appendChild(this.I);window.c3canvas=this.I;this.Hb=v.map(e=>new e(this));this.pd();const c=g.Na.map(e=>"string"===typeof e?(new URL(e,this.W)).toString():e);Array.isArray(g.Xc)&&c.unshift(...g.Xc);await Promise.all(c.map(e=>a(e)));if(g.Yd&&0<g.Yd.length){const e=self.C3_ProjectScriptsStatus;try{if(await Promise.all(g.Yd.map(k=>
a(k[1]))),Object.values(e).some(k=>!k)){self.setTimeout(()=>this.Ad(e),100);return}}catch(k){console.error("[Preview] Error loading project scripts: ",k);self.setTimeout(()=>this.Ad(e),100);return}}"preview"===this.J&&"object"!==typeof self.Ug.Wg?(console.error("[C3 runtime] Failed to load JavaScript code used in events. Check all your JavaScript code has valid syntax."),alert("Failed to load JavaScript code used in events. Check all your JavaScript code has valid syntax.")):(g=Object.assign(this.qd(g),
{isInWorker:!1,messagePort:l,canvas:this.I,runOnStartupFunctions:B}),this.Fa=self.C3_CreateRuntime(g),await self.C3_InitRuntime(this.Fa,g))}Ad(g){g=`Failed to load project script '${Object.entries(g).filter(l=>!l[1]).map(l=>l[0])[0]}'. Check all your JavaScript code has valid syntax.`;console.error("[Preview] "+g);alert(g)}async qf(){const g=await this.$a.od();return{outputPort:g,transferables:[g]}}ff(){if(this.oa)throw Error("not available in worker mode");return this.Fa}dc(g,l,c,e,k){this.ma.postMessage({type:"event",
component:g,handler:l,dispatchOpts:e||null,data:c,responseId:null},this.Vc?void 0:k)}gd(g,l,c,e,k){const m=z++,p=new Promise((u,H)=>{w.set(m,{resolve:u,reject:H})});this.ma.postMessage({type:"event",component:g,handler:l,dispatchOpts:e||null,data:c,responseId:m},this.Vc?void 0:k);return p}["_OnMessageFromRuntime"](g){const l=g.type;if("event"===l)return this.vf(g);if("result"===l)this.Kf(g);else if("runtime-ready"===l)this.Lf();else if("alert"===l)alert(g.message);else throw Error(`unknown message '${l}'`);
}vf(g){const l=g.component,c=g.handler,e=g.data,k=g.responseId;if(g=y.get(l))if(g=g.get(c)){var m=null;try{m=g(e)}catch(p){console.error(`Exception in '${l}' handler '${c}':`,p);null!==k&&this.Ab(k,!1,""+p);return}if(null===k)return m;m&&m.then?m.then(p=>this.Ab(k,!0,p)).catch(p=>{console.error(`Rejection from '${l}' handler '${c}':`,p);this.Ab(k,!1,""+p)}):this.Ab(k,!0,m)}else console.warn(`[DOM] No handler '${c}' for component '${l}'`);else console.warn(`[DOM] No event handlers for component '${l}'`)}Ab(g,
l,c){let e;c&&c.transferables&&(e=c.transferables);this.ma.postMessage({type:"result",responseId:g,isOk:l,result:c},e)}Kf(g){const l=g.responseId,c=g.isOk;g=g.result;const e=w.get(l);c?e.resolve(g):e.reject(g);w.delete(l)}B(g,l,c){let e=y.get(g);e||(e=new Map,y.set(g,e));if(e.has(l))throw Error(`[DOM] Component '${g}' already has handler '${l}'`);e.set(l,c)}static ya(g){if(v.includes(g))throw Error("DOM handler already added");v.push(g)}pd(){for(const g of this.Hb)if("runtime"===g.Ta){this.Ka=g;return}throw Error("cannot find runtime DOM handler");
}Cf(g){this.dc("debugger","message",g)}Lf(){for(const g of this.Hb)g.Yc()}static cc(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement)}Oe(g){this.Ia.push(g);this.Ac()}Yf(g){g=this.Ia.indexOf(g);if(-1===g)throw Error("invalid callback");this.Ia.splice(g,1);this.Ia.length||this.kc()}Ac(){-1===this.Ja&&this.Ia.length&&(this.Ja=requestAnimationFrame(this.Hg))}kc(){-1!==this.Ja&&(cancelAnimationFrame(this.Ja),this.Ja=-1)}Gf(){this.Ja=-1;for(const g of this.Ia)g();
this.Ac()}ta(g){this.Ka.ta(g)}Aa(g){this.Ka.Aa(g)}zc(){this.Ka.zc()}tb(g){this.Ka.tb(g)}ze(){return!!d["audio/webm; codecs=opus"]}async wg(g){g=await this.gd("runtime","opus-decode",{arrayBuffer:g},null,[g]);return new Float32Array(g)}ye(g){return/^(?:[a-z]+:)?\/\//.test(g)||"data:"===g.substr(0,5)||"blob:"===g.substr(0,5)}Ae(g){return!this.ye(g)}async pf(g){const l=g.filename;switch(g.as){case "text":return await this.oe(l);case "buffer":return await this.Wb(l);default:throw Error("unsupported type");
}}ad(g){const l=window.cordova.file.applicationDirectory+"www/"+g.toLowerCase();return new Promise((c,e)=>{window.resolveLocalFileSystemURL(l,k=>{k.file(c,e)},e)})}async oe(g){g=await this.ad(g);return await f(g)}lc(){if(q.length&&!(8<=r)){r++;var g=q.shift();this.Ve(g.filename,g.Qg,g.Lg)}}Wb(g){return new Promise((l,c)=>{q.push({filename:g,Qg:e=>{r--;this.lc();l(e)},Lg:e=>{r--;this.lc();c(e)}});this.lc()})}async Ve(g,l,c){try{const e=await this.ad(g),k=await n(e);l(k)}catch(e){c(e)}}async Ue(){const g=
[];for(const [l,c]of Object.entries(this.ha))g.push(this.Te(l,c));await Promise.all(g)}async Te(g,l){if("object"===typeof l)this.ha[g]=new Blob([l.str],{type:l.type}),this.Mb[g]=l.str;else{let c=await this.df(l);c||(c=this.Ze(l));this.ha[g]=c}}async df(g){try{return await (await fetch(g)).blob()}catch(l){return console.warn("Failed to fetch a data: URI. Falling back to a slower workaround. This is probably because the Content Security Policy unnecessarily blocked it. Allow data: URIs in your CSP to avoid this.",
l),null}}Ze(g){g=this.Sf(g);return this.Re(g.data,g.Ng)}Sf(g){var l=g.indexOf(",");if(0>l)throw new URIError("expected comma in data: uri");var c=g.substring(l+1);l=g.substring(5,l).split(";");g=l[0]||"";const e=l[2];c="base64"===l[1]||"base64"===e?atob(c):decodeURIComponent(c);return{Ng:g,data:c}}Re(g,l){var c=g.length;let e=c>>2,k=new Uint8Array(c),m=new Uint32Array(k.buffer,0,e),p,u;for(u=p=0;p<e;++p)m[p]=g.charCodeAt(u++)|g.charCodeAt(u++)<<8|g.charCodeAt(u++)<<16|g.charCodeAt(u++)<<24;for(c&=
3;c--;)k[u]=g.charCodeAt(u),++u;return new Blob([k],{type:l})}rg(){let g=null;const l=new Promise(k=>g=k),c=new ArrayBuffer(1),e=new MessageChannel;e.port2.onmessage=k=>{k.data&&k.data.arrayBuffer||(this.Vc=!0,console.warn("MessageChannel transfers determined to be broken. Disabling transferables."));g()};e.port1.postMessage({arrayBuffer:c},[c]);return l}}}"use strict";
{const h=self.sa;function a(c){return c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents||c.originalEvent&&c.originalEvent.sourceCapabilities&&c.originalEvent.sourceCapabilities.firesTouchEvents}const b=new Map([["OSLeft","MetaLeft"],["OSRight","MetaRight"]]),d={dispatchRuntimeEvent:!0,dispatchUserScriptEvent:!0},f={dispatchUserScriptEvent:!0},n={dispatchRuntimeEvent:!0};function q(c){return new Promise((e,k)=>{const m=document.createElement("link");m.onload=()=>e(m);m.onerror=p=>k(p);m.rel=
"stylesheet";m.href=c;document.head.appendChild(m)})}function r(c){return new Promise((e,k)=>{const m=new Image;m.onload=()=>e(m);m.onerror=p=>k(p);m.src=c})}async function v(c){c=URL.createObjectURL(c);try{return await r(c)}finally{URL.revokeObjectURL(c)}}function y(c){return new Promise((e,k)=>{let m=new FileReader;m.onload=p=>e(p.target.result);m.onerror=p=>k(p);m.readAsText(c)})}async function w(c,e,k){if(!/firefox/i.test(navigator.userAgent))return await v(c);var m=await y(c);m=(new DOMParser).parseFromString(m,
"image/svg+xml");const p=m.documentElement;if(p.hasAttribute("width")&&p.hasAttribute("height")){const u=p.getAttribute("width"),H=p.getAttribute("height");if(!u.includes("%")&&!H.includes("%"))return await v(c)}p.setAttribute("width",e+"px");p.setAttribute("height",k+"px");m=(new XMLSerializer).serializeToString(m);c=new Blob([m],{type:"image/svg+xml"});return await v(c)}function z(c){do{if(c.parentNode&&c.hasAttribute("contenteditable"))return!0;c=c.parentNode}while(c);return!1}const B=new Set(["canvas",
"body","html"]);function A(c){B.has(c.target.tagName.toLowerCase())&&c.preventDefault()}function x(c){(c.metaKey||c.ctrlKey)&&c.preventDefault()}self.C3_GetSvgImageSize=async function(c){c=await v(c);if(0<c.width&&0<c.height)return[c.width,c.height];{c.style.position="absolute";c.style.left="0px";c.style.top="0px";c.style.visibility="hidden";document.body.appendChild(c);const e=c.getBoundingClientRect();document.body.removeChild(c);return[e.width,e.height]}};self.C3_RasterSvgImageBlob=async function(c,
e,k,m,p){c=await w(c,e,k);const u=document.createElement("canvas");u.width=m;u.height=p;u.getContext("2d").drawImage(c,0,0,e,k);return u};let g=!1;document.addEventListener("pause",()=>g=!0);document.addEventListener("resume",()=>g=!1);function l(){try{return window.parent&&window.parent.document.hasFocus()}catch(c){return!1}}h.ya(class extends self.pa{constructor(c){super(c,"runtime");this.Kd=!0;this.La=-1;this.Tc="any";this.Bd=this.Cd=!1;this.Mc=this.ib=this.va=null;c.B("canvas","update-size",m=>
this.Qf(m));c.B("runtime","invoke-download",m=>this.Af(m));c.B("runtime","raster-svg-image",m=>this.Hf(m));c.B("runtime","get-svg-image-size",m=>this.xf(m));c.B("runtime","set-target-orientation",m=>this.Mf(m));c.B("runtime","register-sw",()=>this.Jf());c.B("runtime","post-to-debugger",m=>this.wd(m));c.B("runtime","go-to-script",m=>this.wd(m));c.B("runtime","before-start-ticking",()=>this.nf());c.B("runtime","debug-highlight",m=>this.rf(m));c.B("runtime","enable-device-orientation",()=>this.Qe());
c.B("runtime","enable-device-motion",()=>this.Pe());c.B("runtime","add-stylesheet",m=>this.mf(m));c.B("runtime","alert",m=>this.rc(m));c.B("runtime","hide-cordova-splash",()=>this.yf());const e=new Set(["input","textarea","datalist"]);window.addEventListener("contextmenu",m=>{const p=m.target;e.has(p.tagName.toLowerCase())||z(p)||m.preventDefault()});const k=c.I;window.addEventListener("selectstart",A);window.addEventListener("gesturehold",A);k.addEventListener("selectstart",A);k.addEventListener("gesturehold",
A);window.addEventListener("touchstart",A,{passive:!1});"undefined"!==typeof PointerEvent?(window.addEventListener("pointerdown",A,{passive:!1}),k.addEventListener("pointerdown",A)):k.addEventListener("touchstart",A);this.fb=0;window.addEventListener("mousedown",m=>{1===m.button&&m.preventDefault()});window.addEventListener("mousewheel",x,{passive:!1});window.addEventListener("wheel",x,{passive:!1});window.addEventListener("resize",()=>this.Rf());c.qb()&&window.addEventListener("focusout",()=>{{const u=
document.activeElement;if(u){var m=u.tagName.toLowerCase();var p=new Set("email number password search tel text url".split(" "));m="textarea"===m?!0:"input"===m?p.has(u.type.toLowerCase()||"text"):z(u)}else m=!1}m||(document.scrollingElement.scrollTop=0)});this.Ga=new Set;this.Nb=new WeakSet;this.la=!1}nf(){"cordova"===this.A.J?(document.addEventListener("pause",()=>this.yc(!0)),document.addEventListener("resume",()=>this.yc(!1))):document.addEventListener("visibilitychange",()=>this.yc(document.hidden));
return{isSuspended:!(!document.hidden&&!g)}}Yc(){window.addEventListener("focus",()=>this.Bb("window-focus"));window.addEventListener("blur",()=>{this.Bb("window-blur",{parentHasFocus:l()});this.fb=0});window.addEventListener("fullscreenchange",()=>this.tc());window.addEventListener("webkitfullscreenchange",()=>this.tc());window.addEventListener("mozfullscreenchange",()=>this.tc());window.addEventListener("fullscreenerror",e=>this.uc(e));window.addEventListener("webkitfullscreenerror",e=>this.uc(e));
window.addEventListener("mozfullscreenerror",e=>this.uc(e));window.addEventListener("keydown",e=>this.vd("keydown",e));window.addEventListener("keyup",e=>this.vd("keyup",e));window.addEventListener("dblclick",e=>this.vc("dblclick",e,d));window.addEventListener("wheel",e=>this.Ef(e));"undefined"!==typeof PointerEvent?(window.addEventListener("pointerdown",e=>{this.oc(e);this.Ra("pointerdown",e)}),this.A.oa&&"undefined"!==typeof window.onpointerrawupdate&&self===self.top?(this.ib=new self.Fe(()=>this.bf(),
5),this.ib.Fd=!0,window.addEventListener("pointerrawupdate",e=>this.Ff(e))):window.addEventListener("pointermove",e=>this.Ra("pointermove",e)),window.addEventListener("pointerup",e=>this.Ra("pointerup",e)),window.addEventListener("pointercancel",e=>this.Ra("pointercancel",e))):(window.addEventListener("mousedown",e=>{this.oc(e);this.wc("pointerdown",e)}),window.addEventListener("mousemove",e=>this.wc("pointermove",e)),window.addEventListener("mouseup",e=>this.wc("pointerup",e)),window.addEventListener("touchstart",
e=>{this.oc(e);this.zb("pointerdown",e)}),window.addEventListener("touchmove",e=>this.zb("pointermove",e)),window.addEventListener("touchend",e=>this.zb("pointerup",e)),window.addEventListener("touchcancel",e=>this.zb("pointercancel",e)));const c=()=>this.zc();window.addEventListener("pointerup",c,!0);window.addEventListener("touchend",c,!0);window.addEventListener("click",c,!0);window.addEventListener("keydown",c,!0);window.addEventListener("gamepadconnected",c,!0)}Bb(c,e){t(this,c,e||null,n)}xb(){return Math.max(window.innerWidth,
1)}wb(){return Math.max(window.innerHeight,1)}Rf(){const c=this.xb(),e=this.wb();this.Bb("window-resize",{innerWidth:c,innerHeight:e,devicePixelRatio:window.devicePixelRatio});this.A.qb()&&(-1!==this.La&&clearTimeout(this.La),this.xd(c,e,0))}Zf(c,e,k){-1!==this.La&&clearTimeout(this.La);this.La=setTimeout(()=>this.xd(c,e,k),48)}xd(c,e,k){const m=this.xb(),p=this.wb();this.La=-1;m!=c||p!=e?this.Bb("window-resize",{innerWidth:m,innerHeight:p,devicePixelRatio:window.devicePixelRatio}):10>k&&this.Zf(m,
p,k+1)}Mf(c){this.Tc=c.targetOrientation}sg(){const c=this.Tc;if(screen.orientation&&screen.orientation.lock)screen.orientation.lock(c).catch(e=>console.warn("[Construct 3] Failed to lock orientation: ",e));else try{let e=!1;screen.lockOrientation?e=screen.lockOrientation(c):screen.webkitLockOrientation?e=screen.webkitLockOrientation(c):screen.mozLockOrientation?e=screen.mozLockOrientation(c):screen.msLockOrientation&&(e=screen.msLockOrientation(c));e||console.warn("[Construct 3] Failed to lock orientation")}catch(e){console.warn("[Construct 3] Failed to lock orientation: ",
e)}}tc(){const c=h.cc();c&&"any"!==this.Tc&&this.sg();t(this,"fullscreenchange",{isFullscreen:c,innerWidth:this.xb(),innerHeight:this.wb()})}uc(c){console.warn("[Construct 3] Fullscreen request failed: ",c);t(this,"fullscreenerror",{isFullscreen:h.cc(),innerWidth:this.xb(),innerHeight:this.wb()})}yc(c){c?this.A.kc():this.A.Ac();t(this,"visibilitychange",{hidden:c})}vd(c,e){"Backspace"===e.key&&A(e);const k=b.get(e.code)||e.code;C(this,c,{code:k,key:e.key,which:e.which,repeat:e.repeat,altKey:e.altKey,
ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey,timeStamp:e.timeStamp},d)}Ef(c){t(this,"wheel",{clientX:c.clientX,clientY:c.clientY,pageX:c.pageX,pageY:c.pageY,deltaX:c.deltaX,deltaY:c.deltaY,deltaZ:c.deltaZ,deltaMode:c.deltaMode,timeStamp:c.timeStamp},d)}vc(c,e,k){a(e)||C(this,c,{button:e.button,buttons:e.buttons,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,timeStamp:e.timeStamp},k)}wc(c,e){if(!a(e)){var k=this.fb;"pointerdown"===c&&0!==k?c="pointermove":"pointerup"===
c&&0!==e.buttons&&(c="pointermove");C(this,c,{pointerId:1,pointerType:"mouse",button:e.button,buttons:e.buttons,lastButtons:k,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,timeStamp:e.timeStamp},d);this.fb=e.buttons;this.vc(e.type,e,f)}}Ra(c,e){if(this.ib&&"pointermove"!==c){var k=this.ib;k.Ya||(G(k),k.Kb=Date.now())}k=0;"mouse"===e.pointerType&&(k=this.fb);C(this,c,{pointerId:e.pointerId,pointerType:e.pointerType,
button:e.button,buttons:e.buttons,lastButtons:k,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,width:e.width||0,height:e.height||0,pressure:e.pressure||0,tangentialPressure:e.tangentialPressure||0,tiltX:e.tiltX||0,tiltY:e.tiltY||0,twist:e.twist||0,timeStamp:e.timeStamp},d);"mouse"===e.pointerType&&(k="mousemove","pointerdown"===c?k="mousedown":"pointerup"===c&&(k="pointerup"),this.vc(k,e,f),this.fb=e.buttons)}Ff(c){this.Mc=c;c=this.ib;if(-1===c.Ma){var e=Date.now(),k=e-c.Kb,m=c.yg;
k>=m&&c.Fd?(c.Kb=e,c.Ya=!0,c.Dc(),c.Ya=!1):c.Ma=self.setTimeout(c.Wd,Math.max(m-k,4))}}bf(){this.Ra("pointermove",this.Mc);this.Mc=null}zb(c,e){for(let k=0,m=e.changedTouches.length;k<m;++k){const p=e.changedTouches[k];C(this,c,{pointerId:p.identifier,pointerType:"touch",button:0,buttons:0,lastButtons:0,clientX:p.clientX,clientY:p.clientY,pageX:p.pageX,pageY:p.pageY,width:2*(p.radiusX||p.webkitRadiusX||0),height:2*(p.radiusY||p.webkitRadiusY||0),pressure:p.force||p.webkitForce||0,tangentialPressure:0,
tiltX:0,tiltY:0,twist:p.rotationAngle||0,timeStamp:e.timeStamp},d)}}oc(c){window!==window.top&&window.focus();this.ud(c.target)&&document.activeElement&&!this.ud(document.activeElement)&&document.activeElement.blur()}ud(c){return!c||c===document||c===window||c===document.body||"canvas"===c.tagName.toLowerCase()}Qe(){this.Cd||(this.Cd=!0,window.addEventListener("deviceorientation",c=>this.tf(c)),window.addEventListener("deviceorientationabsolute",c=>this.uf(c)))}Pe(){this.Bd||(this.Bd=!0,window.addEventListener("devicemotion",
c=>this.sf(c)))}tf(c){t(this,"deviceorientation",{absolute:!!c.absolute,alpha:c.alpha||0,beta:c.beta||0,gamma:c.gamma||0,timeStamp:c.timeStamp,webkitCompassHeading:c.webkitCompassHeading,webkitCompassAccuracy:c.webkitCompassAccuracy},d)}uf(c){t(this,"deviceorientationabsolute",{absolute:!!c.absolute,alpha:c.alpha||0,beta:c.beta||0,gamma:c.gamma||0,timeStamp:c.timeStamp},d)}sf(c){let e=null;var k=c.acceleration;k&&(e={x:k.x||0,y:k.y||0,z:k.z||0});k=null;var m=c.accelerationIncludingGravity;m&&(k={x:m.x||
0,y:m.y||0,z:m.z||0});m=null;const p=c.rotationRate;p&&(m={alpha:p.alpha||0,beta:p.beta||0,gamma:p.gamma||0});t(this,"devicemotion",{acceleration:e,accelerationIncludingGravity:k,rotationRate:m,interval:c.interval,timeStamp:c.timeStamp},d)}Qf(c){const e=this.A,k=e.I;k.style.width=c.styleWidth+"px";k.style.height=c.styleHeight+"px";k.style.marginLeft=c.marginLeft+"px";k.style.marginTop=c.marginTop+"px";e.fd();this.Kd&&(k.style.display="",this.Kd=!1)}Af(c){const e=c.url;c=c.filename;const k=document.createElement("a"),
m=document.body;k.textContent=c;k.href=e;k.download=c;m.appendChild(k);k.click();m.removeChild(k)}async Hf(c){var e=c.imageBitmapOpts;c=await self.C3_RasterSvgImageBlob(c.blob,c.imageWidth,c.imageHeight,c.surfaceWidth,c.surfaceHeight);e=e?await createImageBitmap(c,e):await createImageBitmap(c);return{imageBitmap:e,transferables:[e]}}async xf(c){return await self.C3_GetSvgImageSize(c.blob)}async mf(c){await q(c.url)}zc(){var c=[...this.Ga];this.Ga.clear();if(!this.la)for(const e of c)(c=e.play())&&
c.catch(()=>{this.Nb.has(e)||this.Ga.add(e)})}ta(c){if("function"!==typeof c.play)throw Error("missing play function");this.Nb.delete(c);let e;try{e=c.play()}catch(k){this.Ga.add(c);return}e&&e.catch(()=>{this.Nb.has(c)||this.Ga.add(c)})}Aa(c){this.Ga.delete(c);this.Nb.add(c)}tb(c){this.la=!!c}yf(){navigator.splashscreen&&navigator.splashscreen.hide&&navigator.splashscreen.hide()}rf(c){if(c.show){this.va||(this.va=document.createElement("div"),this.va.id="inspectOutline",document.body.appendChild(this.va));
var e=this.va;e.style.display="";e.style.left=c.left-1+"px";e.style.top=c.top-1+"px";e.style.width=c.width+2+"px";e.style.height=c.height+2+"px";e.textContent=c.name}else this.va&&(this.va.style.display="none")}Jf(){window.C3_RegisterSW&&window.C3_RegisterSW()}wd(c){window.c3_postToMessagePort&&(c.from="runtime",window.c3_postToMessagePort(c))}kf(c,e){return this.A.gd(this.Ta,"js-invoke-function",{name:c,params:e},void 0,void 0)}rc(c){alert(c.message)}})}"use strict";
{const h=document.currentScript.src;self.Be=class{constructor(a){this.Rb=a;this.W=h?h.substr(0,h.lastIndexOf("/")+1):a.W;this.Eg=Math.min(navigator.hardwareConcurrency||2,16);this.Fc=null;this.Ld=[];this.Qc=this.Jc=null}async xe(){if(this.xg)throw Error("already initialised");this.xg=!0;var a=this.Rb.nc("dispatchworker.js");this.Fc=await this.Rb.Xb(a,this.W,{name:"DispatchWorker"});a=new MessageChannel;this.Jc=a.port1;this.Fc.postMessage({type:"_init","in-port":a.port2},[a.port2]);this.Qc=await this.od()}async od(){const a=
this.Ld.length;var b=this.Rb.nc("jobworker.js");b=await this.Rb.Xb(b,this.W,{name:"JobWorker"+a});const d=new MessageChannel,f=new MessageChannel;this.Fc.postMessage({type:"_addJobWorker",port:d.port1},[d.port1]);b.postMessage({type:"init",number:a,"dispatch-port":d.port2,"output-port":f.port2},[d.port2,f.port2]);this.Ld.push(b);return f.port1}ve(){return{inputPort:this.Jc,outputPort:this.Qc,maxNumWorkers:this.Eg}}we(){return[this.Jc,this.Qc]}}}"use strict";
window.C3_IsSupported&&(window.c3_runtimeInterface=new self.sa({Rg:!0,Sg:"workermain.js",Na:["scripts/c3runtime.js"],Og:"scripts/",Xc:[],Xd:"cordova"}));"use strict";async function J(h,a){a=a.type;let b=!0;0===a?b=await K():1===a&&(b=await L());t(h,"permission-result",{type:a,result:b})}
async function K(){if(!self.DeviceOrientationEvent||!self.DeviceOrientationEvent.requestPermission)return!0;try{return"granted"===await self.DeviceOrientationEvent.requestPermission()}catch(h){return console.warn("[Touch] Failed to request orientation permission: ",h),!1}}
async function L(){if(!self.DeviceMotionEvent||!self.DeviceMotionEvent.requestPermission)return!0;try{return"granted"===await self.DeviceMotionEvent.requestPermission()}catch(h){return console.warn("[Touch] Failed to request motion permission: ",h),!1}}self.sa.ya(class extends self.pa{constructor(h){super(h,"touch");D(this,"request-permission",a=>J(this,a))}});"use strict";
function M(h){window.C3_RegisterSW&&window.OfflineClientInfo&&window.OfflineClientInfo.SetMessageCallback(a=>t(h,"sw-message",a.data))}
function N(h){h=h.orientation;if(screen.orientation&&screen.orientation.lock)screen.orientation.lock(h).catch(a=>console.warn("[Construct 3] Failed to lock orientation: ",a));else try{let a=!1;screen.lockOrientation?a=screen.lockOrientation(h):screen.webkitLockOrientation?a=screen.webkitLockOrientation(h):screen.mozLockOrientation?a=screen.mozLockOrientation(h):screen.msLockOrientation&&(a=screen.msLockOrientation(h));a||console.warn("[Construct 3] Failed to lock orientation")}catch(a){console.warn("[Construct 3] Failed to lock orientation: ",
a)}}
self.sa.ya(class extends self.pa{constructor(h){super(h,"browser");this.J="";E(this,[["get-initial-state",a=>{this.J=a.exportType;return{location:location.toString(),isOnline:!!navigator.onLine,referrer:document.referrer,title:document.title,isCookieEnabled:!!navigator.cookieEnabled,screenWidth:screen.width,screenHeight:screen.height,windowOuterWidth:window.outerWidth,windowOuterHeight:window.outerHeight,isScirraArcade:"undefined"!==typeof window.is_scirra_arcade}}],["ready-for-sw-messages",()=>M(this)],
["alert",a=>this.rc(a)],["close",()=>{navigator.app&&navigator.app.exitApp?navigator.app.exitApp():navigator.device&&navigator.device.exitApp?navigator.device.exitApp():window.close()}],["set-focus",a=>this.xc(a)],["vibrate",a=>{navigator.vibrate&&navigator.vibrate(a.pattern)}],["lock-orientation",a=>N(a)],["unlock-orientation",()=>{try{screen.orientation&&screen.orientation.unlock?screen.orientation.unlock():screen.unlockOrientation?screen.unlockOrientation():screen.webkitUnlockOrientation?screen.webkitUnlockOrientation():
screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()}catch(a){}}],["navigate",a=>{var b=a.type;if("back"===b)navigator.app&&navigator.app.backHistory?navigator.app.backHistory():window.back();else if("forward"===b)window.forward();else if("home"===b)window.home();else if("reload"===b)location.reload();else if("url"===b){b=a.url;var d=a.target;a=a.exportType;"windows-uwp"===a&&"undefined"!==typeof Windows?Windows.System.Launcher.launchUriAsync(new Windows.Foundation.Uri(b)):
self.cordova&&self.cordova.InAppBrowser?self.cordova.InAppBrowser.open(b,"_system"):"preview"===a?window.open(b,"_blank"):this.Xg||(2===d?window.top.location=b:1===d?window.parent.location=b:window.location=b)}else"new-window"===b&&(b=a.url,d=a.tag,"windows-uwp"===a.exportType&&"undefined"!==typeof Windows?Windows.System.Launcher.launchUriAsync(new Windows.Foundation.Uri(b)):self.cordova&&self.cordova.InAppBrowser?self.cordova.InAppBrowser.open(b,"_system"):window.open(b,d))}],["request-fullscreen",
a=>{{const b={navigationUI:"auto"};a=a.navUI;1===a?b.navigationUI="hide":2===a&&(b.navigationUI="show");a=document.documentElement;a.requestFullscreen?a.requestFullscreen(b):a.mozRequestFullScreen?a.mozRequestFullScreen(b):a.msRequestFullscreen?a.msRequestFullscreen(b):a.webkitRequestFullScreen&&("undefined"!==typeof Element.ALLOW_KEYBOARD_INPUT?a.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):a.webkitRequestFullScreen())}}],["exit-fullscreen",()=>{document.exitFullscreen?document.exitFullscreen():
document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()}],["set-hash",a=>{location.hash=a.hash}]]);window.addEventListener("online",()=>{t(this,"online-state",{isOnline:!0})});window.addEventListener("offline",()=>{t(this,"online-state",{isOnline:!1})});window.addEventListener("hashchange",()=>{t(this,"hashchange",{location:location.toString()})});document.addEventListener("backbutton",
()=>{t(this,"backbutton")});"undefined"!==typeof Windows&&Windows.UI.Core.SystemNavigationManager.getForCurrentView().addEventListener("backrequested",a=>{a.handled=!0;t(this,"backbutton")})}rc(h){alert(h.message)}xc(h){h=h.isFocus;if("nwjs"===this.J){const a="nwjs"===this.J?nw.Window.get():null;h?a.focus():a.blur()}else h?window.focus():window.blur()}});"use strict";
{function h(){const a=self.RealFile||self.File;return"function"===typeof navigator.canShare&&navigator.canShare({files:[new a(["test file"],"test.txt",{})]})}self.sa.ya(class extends self.pa{constructor(a){super(a,"share");a=!!this.sd();this.Bg=(this.Dg="function"===typeof navigator.share)||a;this.zg=(this.Cg=h())||a;E(this,[["init",()=>this.zf()],["share",b=>this.Nf(b)],["request-rate",b=>this.If(b)],["request-store",b=>this.Of(b)]])}zf(){return{isSupported:this.Bg,isFilesSupported:this.zg}}sd(){return window.plugins&&
window.plugins.socialsharing}rd(){return window.cordova&&window.cordova.plugins&&window.cordova.plugins.RateApp}async Nf(a){var b=a.text;const d=a.title,f=a.url;a=a.files.slice(0);const n=0<a.length,q=this.sd();if(q){const v={};b&&(v.message=b);d&&(v.subject=d);f&&(v.url=f);if(n){b=0;for(var r of a)b+=r.size;try{const y=await this.We(Math.floor(1.25*b));v.files=await Promise.all(a.map(w=>this.Xe(w,y)))}catch(y){console.log("[Share plugin] Share failed: ",y);t(this,"share-failed");return}}q.shareWithOptions(v,
()=>{t(this,"share-completed")},y=>{console.log("[Share plugin] Share failed: ",y);t(this,"share-failed")})}else{r={};b&&(r.text=b);d&&(r.title=d);f&&(r.url=f);n&&(r.files=a);try{await navigator.share(r),t(this,"share-completed")}catch(v){console.log("[Share plugin] Share failed: ",v),t(this,"share-failed")}}}If(a){const b=a.body,d=a.confirm,f=a.cancel;a=a.appID;const n=this.rd();n&&n.Rate(b,d,f,a)}Of(a){a=a.appID;const b=this.rd();b&&b.Store(a)}We(a){return new Promise((b,d)=>{window.requestFileSystem(window.TEMPORARY,
a,f=>b(f.root),d)})}Xe(a,b){return new Promise((d,f)=>{b.getFile(a.name,{create:!0,exclusive:!1},n=>{const q=n.toURL();n.createWriter(r=>{r.onwriteend=()=>d(q);r.onerror=f;r.write(a)})},f)})}})}"use strict";
{let h=!1;self.sa.ya(class extends self.pa{constructor(a){super(a,"advert");a=b=>[b,d=>this.Se(b,d)];E(this,[a("CreateBannerAdvert"),a("ShowBannerAdvert"),a("HideBannerAdvert"),a("CreateInterstitialAdvert"),a("ShowInterstitialAdvert"),a("CreateVideoAdvert"),a("ShowVideoAdvert"),a("Configure"),a("RequestConsent"),a("SetUserPersonalisation"),a("SetMaxAdContentRating"),a("TagForChildDirectedTreatment"),a("TagForUnderAgeOfConsent"),a("RequestIDFA")])}gf(){if(window.cordova)return window.cordova.plugins.ConstructAd}async Se(a,
b){const d=this.gf();if(!d)throw h||(h=!0,console.warn("The Mobile Advert plugin is not loaded. Please note that it only works in Android or iOS exports")),Error("advert plugin not loaded");return new Promise((f,n)=>{d[a](...b,(q,r)=>{q?n(q):f(r)})})}})}"use strict";
{const h=180/Math.PI;self.da=class extends self.pa{constructor(a){super(a,"audio");this.Gb=this.f=null;this.Ib=this.Ic=!1;this.na=()=>this.tg();this.aa=[];this.C=[];this.ga=null;this.Md="";this.Nd=-1;this.hb=new Map;this.Nc=1;this.la=!1;this.Uc=0;this.Tb=1;this.Gc=0;this.Pd="HRTF";this.Gd="inverse";this.Qd=600;this.Od=1E4;this.Sd=1;this.Id=this.Rc=!1;this.Ig=this.A.ze();this.ba=new Map;this.Da=new Set;this.Kc=!1;this.Oc="";this.wa=null;self.C3Audio_OnMicrophoneStream=(b,d)=>this.Df(b,d);this.Fb=null;
self.C3Audio_GetOutputStream=()=>this.wf();self.C3Audio_DOMInterface=this;E(this,[["create-audio-context",b=>this.Ye(b)],["play",b=>this.Tf(b)],["stop",b=>this.pg(b)],["stop-all",()=>this.qg()],["set-paused",b=>this.ig(b)],["set-volume",b=>this.ng(b)],["fade-volume",b=>this.cf(b)],["set-master-volume",b=>this.gg(b)],["set-muted",b=>this.hg(b)],["set-silent",b=>this.kg(b)],["set-looping",b=>this.fg(b)],["set-playback-rate",b=>this.jg(b)],["seek",b=>this.$f(b)],["preload",b=>this.Uf(b)],["unload",b=>
this.ug(b)],["unload-all",()=>this.vg()],["set-suspended",b=>this.lg(b)],["add-effect",b=>this.md(b)],["set-effect-param",b=>this.cg(b)],["remove-effects",b=>this.Wf(b)],["tick",b=>this.Pf(b)],["load-state",b=>this.Bf(b)]])}async Ye(a){a.isiOSCordova&&(this.Rc=!0);this.Uc=a.timeScaleMode;this.Pd=["equalpower","HRTF","soundfield"][a.panningModel];this.Gd=["linear","inverse","exponential"][a.distanceModel];this.Qd=a.refDistance;this.Od=a.maxDistance;this.Sd=a.rolloffFactor;var b={latencyHint:a.latencyHint};
if("undefined"!==typeof AudioContext)this.f=new AudioContext(b);else if("undefined"!==typeof webkitAudioContext)this.f=new webkitAudioContext(b);else throw Error("Web Audio API not supported");this.nd();this.f.onstatechange=()=>{"running"!==this.f.state&&this.nd()};this.Gb=this.f.createGain();this.Gb.connect(this.f.destination);b=a.listenerPos;this.f.listener.setPosition(b[0],b[1],b[2]);this.f.listener.setOrientation(0,0,1,0,-1,0);self.C3_GetAudioContextCurrentTime=()=>this.Yb();try{await Promise.all(a.preloadList.map(d=>
this.vb(d.originalUrl,d.url,d.type,!1)))}catch(d){console.error("[Construct 3] Preloading sounds failed: ",d)}return{sampleRate:this.f.sampleRate}}nd(){this.Ib||(this.Ic=!1,window.addEventListener("pointerup",this.na,!0),window.addEventListener("touchend",this.na,!0),window.addEventListener("click",this.na,!0),window.addEventListener("keydown",this.na,!0),this.Ib=!0)}$e(){this.Ib&&(this.Ic=!0,window.removeEventListener("pointerup",this.na,!0),window.removeEventListener("touchend",this.na,!0),window.removeEventListener("click",
this.na,!0),window.removeEventListener("keydown",this.na,!0),this.Ib=!1)}tg(){if(!this.Ic){var a=this.f;"suspended"===a.state&&a.resume&&a.resume();var b=a.createBuffer(1,220,22050),d=a.createBufferSource();d.buffer=b;d.connect(a.destination);d.start(0);"running"===a.state&&this.$e()}}V(){return this.f}Yb(){return this.f.currentTime}qa(){return this.Gb}cd(a){return(a=this.ba.get(a.toLowerCase()))?a[0].O():this.qa()}Zd(a,b){a=a.toLowerCase();let d=this.ba.get(a);d||(d=[],this.ba.set(a,d));b.eg(d.length);
b.mg(a);d.push(b);this.zd(a)}zd(a){let b=this.qa();const d=this.ba.get(a);if(d&&d.length){b=d[0].O();for(let f=0,n=d.length;f<n;++f){const q=d[f];f+1===n?q.R(this.qa()):q.R(d[f+1].O())}}for(const f of this.ja(a))f.Ge(b);this.wa&&this.Oc===a&&(this.wa.disconnect(),this.wa.connect(b))}ob(){return this.Nc}pb(){return this.la}dg(){this.Id=!0}qe(a,b){return b?this.A.wg(a).then(d=>{const f=this.f.createBuffer(1,d.length,48E3);f.getChannelData(0).set(d);return f}):new Promise((d,f)=>{this.f.decodeAudioData(a,
d,f)})}ta(a){this.A.ta(a)}Aa(a){this.A.Aa(a)}hd(a){let b=0;for(let d=0,f=this.C.length;d<f;++d){const n=this.C[d];this.C[b]=n;n.K===a?n.c():++b}this.C.length=b}He(){let a=0;for(let b=0,d=this.aa.length;b<d;++b){const f=this.aa[b];this.aa[a]=f;f.ra()?f.c():++a}this.aa.length=a}*ja(a){if(a)for(const b of this.C)self.da.re(b.Z,a)&&(yield b);else this.ga&&!this.ga.S()&&(yield this.ga)}async vb(a,b,d,f,n){for(const q of this.aa)if(q.Pa()===b)return await O(q),q;if(n)return null;f&&(this.Rc||this.Id)&&
this.He();n="audio/webm; codecs=opus"===d&&!this.Ig;f&&n&&this.dg();a=!f||this.Rc||n?new self.me(this,a,b,d,f,n):new self.ke(this,a,b,d,f);this.aa.push(a);await O(a);return a}async mc(a,b,d,f,n){for(const q of this.C)if(q.Pa()===b&&(q.Vb()||n))return q.Je(f),q;a=await this.vb(a,b,d,n);f="html5"===a.Bc?new self.le(a.i,a,f):new self.ne(a.i,a,f);this.C.push(f);return f}Ne(a){let b=this.hb.get(a);if(!b){let d=null;b={Wc:0,promise:new Promise(f=>d=f),resolve:d};this.hb.set(a,b)}b.Wc++}Xf(a){const b=this.hb.get(a);
if(!b)throw Error("expected pending tag");b.Wc--;0===b.Wc&&(b.resolve(),this.hb.delete(a))}jc(a){a||(a=this.Md);return(a=this.hb.get(a))?a.promise:Promise.resolve()}yb(){if(0<this.Da.size)F(this);else for(const a of this.C)if(a.dd()){F(this);break}}Ba(){for(var a of this.Da)a.Ba();a=this.Yb();for(var b of this.C)b.Ba(a);b=this.C.filter(d=>d.dd()).map(d=>d.Oa());t(this,"state",{tickCount:this.Nd,audioInstances:b,analysers:[...this.Da].map(d=>d.te())});0===b.length&&0===this.Da.size&&this.Jb&&(this.A.Yf(this.Vd),
this.Jb=!1)}ec(a,b,d){t(this,"trigger",{type:a,tag:b,aiid:d})}async Tf(a){const b=a.originalUrl,d=a.url,f=a.type,n=a.isMusic,q=a.tag,r=a.isLooping,v=a.vol,y=a.pos,w=a.panning;let z=a.off;0<z&&!a.trueClock&&(this.f.getOutputTimestamp?(a=this.f.getOutputTimestamp(),z=z-a.performanceTime/1E3+a.contextTime):z=z-performance.now()/1E3+this.f.currentTime);this.Md=q;this.Ne(q);try{this.ga=await this.mc(b,d,f,q,n),w?(this.ga.sb(!0),this.ga.Ie(w.x,w.y,w.angle,w.innerAngle,w.outerAngle,w.outerGain),w.hasOwnProperty("uid")&&
this.ga.Ke(w.uid)):this.ga.sb(!1),this.ga.Play(r,v,y,z)}catch(B){console.error("[Construct 3] Audio: error starting playback: ",B);return}finally{this.Xf(q)}F(this)}pg(a){a=a.tag;for(const b of this.ja(a))b.ka()}qg(){for(const a of this.C)a.ka()}ig(a){const b=a.tag;a=a.paused;for(const d of this.ja(b))a?d.Qa():d.rb();this.yb()}ng(a){const b=a.tag;a=a.vol;for(const d of this.ja(b))d.ub(a)}async cf(a){const b=a.tag,d=a.vol,f=a.duration;a=a.stopOnEnd;await this.jc(b);for(const n of this.ja(b))n.se(d,
f,a);this.yb()}gg(a){this.Nc=a.vol;for(const b of this.C)b.Db()}hg(a){const b=a.tag;a=a.isMuted;for(const d of this.ja(b))d.jd(a)}kg(a){this.la=a.isSilent;this.A.tb(this.la);for(const b of this.C)b.Cb()}fg(a){const b=a.tag;a=a.isLooping;for(const d of this.ja(b))d.hc(a)}async jg(a){const b=a.tag;a=a.rate;await this.jc(b);for(const d of this.ja(b))d.ld(a)}async $f(a){const b=a.tag;a=a.pos;await this.jc(b);for(const d of this.ja(b))d.fc(a)}async Uf(a){const b=a.originalUrl,d=a.url,f=a.type;a=a.isMusic;
try{await this.mc(b,d,f,"",a)}catch(n){console.error("[Construct 3] Audio: error preloading: ",n)}}async ug(a){if(a=await this.vb("",a.url,a.type,a.isMusic,!0))a.c(),a=this.aa.indexOf(a),-1!==a&&this.aa.splice(a,1)}vg(){for(const a of this.aa)a.c();this.aa.length=0}lg(a){a=a.isSuspended;!a&&this.f.resume&&this.f.resume();for(const b of this.C)b.ic(a);a&&this.f.suspend&&this.f.suspend()}Pf(a){this.Tb=a.timeScale;this.Gc=a.gameTime;this.Nd=a.tickCount;if(0!==this.Uc)for(var b of this.C)b.Ca();(b=a.listenerPos)&&
this.f.listener.setPosition(b[0],b[1],b[2]);for(const d of a.instPans){a=d.uid;for(const f of this.C)f.fa===a&&f.kd(d.x,d.y,d.angle)}}async md(a){var b=a.type;const d=a.tag;var f=a.params;if("filter"===b)f=new self.ee(this,...f);else if("delay"===b)f=new self.ce(this,...f);else if("convolution"===b){b=null;try{b=await this.vb(a.bufferOriginalUrl,a.bufferUrl,a.bufferType,!1)}catch(n){console.log("[Construct 3] Audio: error loading convolution: ",n);return}f=new self.be(this,b.$,...f);f.ag(a.bufferOriginalUrl,
a.bufferType)}else if("flanger"===b)f=new self.fe(this,...f);else if("phaser"===b)f=new self.he(this,...f);else if("gain"===b)f=new self.ge(this,...f);else if("tremolo"===b)f=new self.je(this,...f);else if("ringmod"===b)f=new self.ie(this,...f);else if("distortion"===b)f=new self.de(this,...f);else if("compressor"===b)f=new self.ae(this,...f);else if("analyser"===b)f=new self.$d(this,...f);else throw Error("invalid effect type");this.Zd(d,f);this.yd()}cg(a){const b=a.index,d=a.param,f=a.value,n=a.ramp,
q=a.time;a=this.ba.get(a.tag);!a||0>b||b>=a.length||(a[b].X(d,f,n,q),this.yd())}Wf(a){a=a.tag.toLowerCase();const b=this.ba.get(a);if(b&&b.length){for(const d of b)d.c();this.ba.delete(a);this.zd(a)}}Me(a){this.Da.add(a);this.yb()}Vf(a){this.Da.delete(a)}yd(){this.Kc||(this.Kc=!0,Promise.resolve().then(()=>this.af()))}af(){const a={};for(const [b,d]of this.ba)a[b]=d.map(f=>f.Oa());t(this,"fxstate",{fxstate:a});this.Kc=!1}async Bf(a){const b=a.saveLoadMode;if(3!==b)for(var d of this.C)d.ra()&&1===
b||(d.ra()||2!==b)&&d.ka();for(const f of this.ba.values())for(const n of f)n.c();this.ba.clear();this.Tb=a.timeScale;this.Gc=a.gameTime;d=a.listenerPos;this.f.listener.setPosition(d[0],d[1],d[2]);this.la=a.isSilent;this.A.tb(this.la);this.Nc=a.masterVolume;d=[];for(const f of Object.values(a.effects))d.push(Promise.all(f.map(n=>this.md(n))));await Promise.all(d);await Promise.all(a.playing.map(f=>this.lf(f,b)));this.yb()}async lf(a,b){if(3!==b){var d=a.bufferOriginalUrl,f=a.bufferUrl,n=a.bufferType,
q=a.isMusic,r=a.tag,v=a.isLooping,y=a.volume,w=a.playbackTime;if(!q||1!==b)if(q||2!==b){b=null;try{b=await this.mc(d,f,n,r,q)}catch(z){console.error("[Construct 3] Audio: error loading audio state: ",z);return}b.Ee(a.pan);b.Play(v,y,w,0);a.isPlaying||b.Qa();b.qc(a)}}}Df(a,b){this.wa&&this.wa.disconnect();this.Oc=b.toLowerCase();this.wa=this.f.createMediaStreamSource(a);this.wa.connect(this.cd(this.Oc))}wf(){this.Fb||(this.Fb=this.f.createMediaStreamDestination(),this.Gb.connect(this.Fb));return this.Fb.stream}static re(a,
b){return a.length!==b.length?!1:a===b?!0:a.toLowerCase()===b.toLowerCase()}static Le(a){return a*h}static pe(a){return Math.pow(10,a/20)}static bd(a){return Math.max(Math.min(self.da.pe(a),1),0)}static De(a){return Math.log(a)/Math.log(10)*20}static Ce(a){return self.da.De(Math.max(Math.min(a,1),0))}static Kg(a,b){return 1-Math.exp(-b*a)}};self.sa.ya(self.da)}"use strict";function O(h){h.Lb||(h.Lb=h.pc());return h.Lb}
self.Zc=class{constructor(h,a,b,d,f){this.i=h;this.Gg=a;this.xa=b;this.P=d;this.Ag=f;this.Bc="";this.Lb=null}c(){this.Lb=this.i=null}pc(){}V(){return this.i.V()}$b(){return this.Gg}Pa(){return this.xa}Zb(){return this.P}ra(){return this.Ag}ea(){}};"use strict";
self.ke=class extends self.Zc{constructor(h,a,b,d,f){super(h,a,b,d,f);this.Bc="html5";this.H=new Audio;this.H.crossOrigin="anonymous";this.H.autoplay=!1;this.H.preload="auto";this.ab=this.bb=null;this.H.addEventListener("canplaythrough",()=>!0);this.gb=this.V().createGain();this.eb=null;this.H.addEventListener("canplay",()=>{this.bb&&(this.bb(),this.ab=this.bb=null);!this.eb&&this.H&&(this.eb=this.V().createMediaElementSource(this.H),this.eb.connect(this.gb))});this.onended=null;this.H.addEventListener("ended",
()=>{if(this.onended)this.onended()});this.H.addEventListener("error",n=>{console.error(`[Construct 3] Audio '${this.xa}' error: `,n);this.ab&&(this.ab(n),this.ab=this.bb=null)})}c(){this.i.hd(this);this.gb.disconnect();this.gb=null;this.eb.disconnect();this.eb=null;this.H&&!this.H.paused&&this.H.pause();this.H=this.onended=null;super.c()}pc(){return new Promise((h,a)=>{this.bb=h;this.ab=a;this.H.src=this.xa})}N(){return this.H}ea(){return this.H.duration}};"use strict";
async function P(h){if(h.ua)return h.ua;var a=h.i.A;if("cordova"===a.J&&a.Ae(h.xa)&&"file:"===location.protocol)h.ua=await a.Wb(h.xa);else{a=await fetch(h.xa);if(!a.ok)throw Error(`error fetching audio data: ${a.status} ${a.statusText}`);h.ua=await a.arrayBuffer()}}async function Q(h){if(h.$)return h.$;h.$=await h.i.qe(h.ua,h.Fg);h.ua=null}
self.me=class extends self.Zc{constructor(h,a,b,d,f,n){super(h,a,b,d,f);this.Bc="webaudio";this.$=this.ua=null;this.Fg=!!n}c(){this.i.hd(this);this.$=this.ua=null;super.c()}async pc(){try{await P(this),await Q(this)}catch(h){console.error(`[Construct 3] Failed to load audio '${this.xa}': `,h)}}ea(){return this.$?this.$.duration:0}};"use strict";
{let h=0;self.$c=class{constructor(a,b,d){this.i=a;this.K=b;this.Z=d;this.Eb=h++;this.L=this.V().createGain();this.L.connect(this.qa());this.v=null;this.Za=!1;this.F=!0;this.U=this.ia=this.D=!1;this.kb=1;this.Ea=!1;this.Y=1;a=this.i.Uc;this.Lc=1===a&&!this.ra()||2===a;this.Wa=this.fa=-1;this.Ud=!1}c(){this.K=this.i=null;this.v&&(this.v.disconnect(),this.v=null);this.L.disconnect();this.L=null}V(){return this.i.V()}qa(){return this.i.cd(this.Z)}ob(){return this.i.ob()}nb(){return this.Lc?this.i.Gc:
performance.now()/1E3}$b(){return this.K.$b()}Pa(){return this.K.Pa()}Zb(){return this.K.Zb()}ra(){return this.K.ra()}Je(a){this.Z=a}S(){}Vb(){}IsPlaying(){return!this.F&&!this.D&&!this.S()}dd(){return!this.F&&!this.S()}za(){}ea(){return this.K.ea()}Play(){}ka(){}Qa(){}rb(){}ub(a){this.kb=a;this.L.gain.cancelScheduledValues(0);this.Wa=-1;this.L.gain.value=this.ac()}se(a,b,d){if(!this.Ea){a*=this.ob();var f=this.L.gain;f.cancelScheduledValues(0);var n=this.i.Yb();b=n+b;f.setValueAtTime(f.value,n);
f.linearRampToValueAtTime(a,b);this.kb=a;this.Wa=b;this.Ud=d}}Db(){this.ub(this.kb)}Ba(a){-1!==this.Wa&&a>=this.Wa&&(this.Wa=-1,this.Ud&&this.ka(),this.i.ec("fade-ended",this.Z,this.Eb))}ac(){const a=this.kb*this.ob();return isFinite(a)?a:0}jd(a){a=!!a;this.Ea!==a&&(this.Ea=a,this.Cb())}pb(){return this.i.pb()}Cb(){}hc(){}ld(a){this.Y!==a&&(this.Y=a,this.Ca())}Ca(){}fc(){}ic(){}sb(a){a=!!a;this.Za!==a&&((this.Za=a)?(this.v||(this.v=this.V().createPanner(),this.v.panningModel=this.i.Pd,this.v.distanceModel=
this.i.Gd,this.v.refDistance=this.i.Qd,this.v.maxDistance=this.i.Od,this.v.rolloffFactor=this.i.Sd),this.L.disconnect(),this.L.connect(this.v),this.v.connect(this.qa())):(this.v.disconnect(),this.L.disconnect(),this.L.connect(this.qa())))}Ie(a,b,d,f,n,q){this.Za&&(this.kd(a,b,d),a=self.da.Le,this.v.coneInnerAngle=a(f),this.v.coneOuterAngle=a(n),this.v.coneOuterGain=q)}kd(a,b,d){this.Za&&(this.v.setPosition(a,b,0),this.v.setOrientation(Math.cos(d),Math.sin(d),0))}Ke(a){this.fa=a}bc(){}Ge(a){const b=
this.v||this.L;b.disconnect();b.connect(a)}Oa(){return{aiid:this.Eb,tag:this.Z,duration:this.ea(),volume:this.kb,isPlaying:this.IsPlaying(),playbackTime:this.za(),playbackRate:this.Y,uid:this.fa,bufferOriginalUrl:this.$b(),bufferUrl:"",bufferType:this.Zb(),isMusic:this.ra(),isLooping:this.U,isMuted:this.Ea,resumePosition:this.bc(),pan:this.ue()}}qc(a){this.ld(a.playbackRate);this.jd(a.isMuted)}ue(){if(!this.v)return null;const a=this.v;return{pos:[a.positionX.value,a.positionY.value,a.positionZ.value],
orient:[a.orientationX.value,a.orientationY.value,a.orientationZ.value],cia:a.coneInnerAngle,coa:a.coneOuterAngle,cog:a.coneOuterGain,uid:this.fa}}Ee(a){a?(this.sb(!0),a=this.v,a.setPosition(...a.pos),a.setOrientation(...a.orient),a.coneInnerAngle=a.cia,a.coneOuterAngle=a.coa,a.coneOuterGain=a.cog,this.fa=a.uid):this.sb(!1)}}}"use strict";
self.le=class extends self.$c{constructor(h,a,b){super(h,a,b);this.K.gb.connect(this.L);this.K.onended=()=>this.sc()}c(){this.ka();this.K.gb.disconnect();super.c()}N(){return this.K.N()}sc(){this.F=!0;this.fa=-1;this.i.ec("ended",this.Z,this.Eb)}S(){return this.N().ended}Vb(){return this.F?!0:this.S()}za(h){let a=this.N().currentTime;h&&(a*=this.Y);this.U||(a=Math.min(a,this.ea()));return a}Play(h,a,b){const d=this.N();1!==d.playbackRate&&(d.playbackRate=1);d.loop!==h&&(d.loop=h);this.ub(a);d.muted&&
(d.muted=!1);if(d.currentTime!==b)try{d.currentTime=b}catch(f){console.warn(`[Construct 3] Exception seeking audio '${this.K.Pa()}' to position '${b}': `,f)}this.i.ta(d);this.D=this.F=!1;this.U=h;this.Y=1}ka(){const h=this.N();h.paused||h.pause();this.i.Aa(h);this.F=!0;this.D=!1;this.fa=-1}Qa(){if(!(this.D||this.F||this.S())){var h=this.N();h.paused||h.pause();this.i.Aa(h);this.D=!0}}rb(){!this.D||this.F||this.S()||(this.i.ta(this.N()),this.D=!1)}Cb(){this.N().muted=this.Ea||this.pb()}hc(h){h=!!h;
this.U!==h&&(this.U=h,this.N().loop=h)}Ca(){let h=this.Y;this.Lc&&(h*=this.i.Tb);try{this.N().playbackRate=h}catch(a){console.warn(`[Construct 3] Unable to set playback rate '${h}':`,a)}}fc(h){if(!this.F&&!this.S())try{this.N().currentTime=h}catch(a){console.warn(`[Construct 3] Error seeking audio to '${h}': `,a)}}bc(){return this.za()}ic(h){h?this.IsPlaying()?(this.N().pause(),this.ia=!0):this.ia=!1:this.ia&&(this.i.ta(this.N()),this.ia=!1)}};"use strict";
function R(h){h.j&&h.j.disconnect();h.j=null;h.Sa=null}
self.ne=class extends self.$c{constructor(h,a,b){super(h,a,b);this.j=null;this.Ob=d=>this.sc(d);this.Hc=!0;this.Sa=null;this.M=this.Sb=0;this.Pc=1}c(){this.ka();R(this);this.Ob=null;super.c()}sc(h){this.D||this.ia||h.target!==this.Sa||(this.F=this.Hc=!0,this.fa=-1,R(this),this.i.ec("ended",this.Z,this.Eb))}S(){return!this.F&&this.j&&this.j.loop||this.D?!1:this.Hc}Vb(){return!this.j||this.F?!0:this.S()}za(h){let a;a=this.D?this.M:this.nb()-this.Sb;h&&(a*=this.Y);this.U||(a=Math.min(a,this.ea()));return a}Play(h,
a,b,d){this.Pc=1;this.ub(a);R(this);this.j=this.V().createBufferSource();this.j.buffer=this.K.$;this.j.connect(this.L);this.Sa=this.j;this.j.onended=this.Ob;this.j.loop=h;this.j.start(d,b);this.D=this.F=this.Hc=!1;this.U=h;this.Y=1;this.Sb=this.nb()-b}ka(){if(this.j)try{this.j.stop(0)}catch(h){}this.F=!0;this.D=!1;this.fa=-1}Qa(){this.D||this.F||this.S()||(this.M=this.za(!0),this.U&&(this.M%=this.ea()),this.D=!0,this.j.stop(0))}rb(){!this.D||this.F||this.S()||(R(this),this.j=this.V().createBufferSource(),
this.j.buffer=this.K.$,this.j.connect(this.L),this.Sa=this.j,this.j.onended=this.Ob,this.j.loop=this.U,this.Db(),this.Ca(),this.Sb=this.nb()-this.M/(this.Y||.001),this.j.start(0,this.M),this.D=!1)}ac(){return super.ac()*this.Pc}Cb(){this.Pc=this.Ea||this.pb()?0:1;this.Db()}hc(h){h=!!h;this.U!==h&&(this.U=h,this.j&&(this.j.loop=h))}Ca(){let h=this.Y;this.Lc&&(h*=this.i.Tb);this.j&&(this.j.playbackRate.value=h)}fc(h){this.F||this.S()||(this.D?this.M=h:(this.Qa(),this.M=h,this.rb()))}bc(){return this.M}ic(h){h?
this.IsPlaying()?(this.ia=!0,this.M=this.za(!0),this.U&&(this.M%=this.ea()),this.j.stop(0)):this.ia=!1:this.ia&&(R(this),this.j=this.V().createBufferSource(),this.j.buffer=this.K.$,this.j.connect(this.L),this.Sa=this.j,this.j.onended=this.Ob,this.j.loop=this.U,this.Db(),this.Ca(),this.Sb=this.nb()-this.M/(this.Y||.001),this.j.start(0,this.M),this.ia=!1)}qc(h){super.qc(h);this.M=h.resumePosition}};"use strict";
{class h{constructor(a){this.i=a;this.f=a.V();this.Jd=-1;this.P=this.Z="";this.g=null}c(){this.f=null}eg(a){this.Jd=a}mg(a){this.Z=a}o(){return this.f.createGain()}O(){}R(){}m(a,b,d,f){a.cancelScheduledValues(0);if(0===f)a.value=b;else{var n=this.f.currentTime;f+=n;switch(d){case 0:a.setValueAtTime(b,f);break;case 1:a.setValueAtTime(a.value,n);a.linearRampToValueAtTime(b,f);break;case 2:a.setValueAtTime(a.value,n),a.exponentialRampToValueAtTime(b,f)}}}Oa(){return{type:this.P,tag:this.Z,params:this.g}}}
self.ee=class extends h{constructor(a,b,d,f,n,q,r){super(a);this.P="filter";this.g=[b,d,f,n,q,r];this.l=this.o();this.b=this.o();this.b.gain.value=r;this.a=this.o();this.a.gain.value=1-r;this.u=this.f.createBiquadFilter();this.u.type=b;this.u.frequency.value=d;this.u.detune.value=f;this.u.Q.value=n;this.u.gain.vlaue=q;this.l.connect(this.u);this.l.connect(this.a);this.u.connect(this.b)}c(){this.l.disconnect();this.u.disconnect();this.b.disconnect();this.a.disconnect();super.c()}R(a){this.b.disconnect();
this.b.connect(a);this.a.disconnect();this.a.connect(a)}O(){return this.l}X(a,b,d,f){switch(a){case 0:b=Math.max(Math.min(b/100,1),0);this.g[5]=b;this.m(this.b.gain,b,d,f);this.m(this.a.gain,1-b,d,f);break;case 1:this.g[1]=b;this.m(this.u.frequency,b,d,f);break;case 2:this.g[2]=b;this.m(this.u.detune,b,d,f);break;case 3:this.g[3]=b;this.m(this.u.Q,b,d,f);break;case 4:this.g[4]=b,this.m(this.u.gain,b,d,f)}}};self.ce=class extends h{constructor(a,b,d,f){super(a);this.P="delay";this.g=[b,d,f];this.l=
this.o();this.b=this.o();this.b.gain.value=f;this.a=this.o();this.a.gain.value=1-f;this.cb=this.o();this.T=this.f.createDelay(b);this.T.delayTime.value=b;this.Va=this.o();this.Va.gain.value=d;this.l.connect(this.cb);this.l.connect(this.a);this.cb.connect(this.b);this.cb.connect(this.T);this.T.connect(this.Va);this.Va.connect(this.cb)}c(){this.l.disconnect();this.b.disconnect();this.a.disconnect();this.cb.disconnect();this.T.disconnect();this.Va.disconnect();super.c()}R(a){this.b.disconnect();this.b.connect(a);
this.a.disconnect();this.a.connect(a)}O(){return this.l}X(a,b,d,f){const n=self.da.bd;switch(a){case 0:b=Math.max(Math.min(b/100,1),0);this.g[2]=b;this.m(this.b.gain,b,d,f);this.m(this.a.gain,1-b,d,f);break;case 4:this.g[1]=n(b);this.m(this.Va.gain,n(b),d,f);break;case 5:this.g[0]=b,this.m(this.T.delayTime,b,d,f)}}};self.be=class extends h{constructor(a,b,d,f){super(a);this.P="convolution";this.g=[d,f];this.Ed=this.Dd="";this.l=this.o();this.b=this.o();this.b.gain.value=f;this.a=this.o();this.a.gain.value=
1-f;this.Ua=this.f.createConvolver();this.Ua.normalize=d;this.Ua.buffer=b;this.l.connect(this.Ua);this.l.connect(this.a);this.Ua.connect(this.b)}c(){this.l.disconnect();this.Ua.disconnect();this.b.disconnect();this.a.disconnect();super.c()}R(a){this.b.disconnect();this.b.connect(a);this.a.disconnect();this.a.connect(a)}O(){return this.l}X(a,b,d,f){switch(a){case 0:b=Math.max(Math.min(b/100,1),0),this.g[1]=b,this.m(this.b.gain,b,d,f),this.m(this.a.gain,1-b,d,f)}}ag(a,b){this.Dd=a;this.Ed=b}Oa(){const a=
super.Oa();a.bufferOriginalUrl=this.Dd;a.bufferUrl="";a.bufferType=this.Ed;return a}};self.fe=class extends h{constructor(a,b,d,f,n,q){super(a);this.P="flanger";this.g=[b,d,f,n,q];this.l=this.o();this.a=this.o();this.a.gain.value=1-q/2;this.b=this.o();this.b.gain.value=q/2;this.Xa=this.o();this.Xa.gain.value=n;this.T=this.f.createDelay(b+d);this.T.delayTime.value=b;this.s=this.f.createOscillator();this.s.frequency.value=f;this.G=this.o();this.G.gain.value=d;this.l.connect(this.T);this.l.connect(this.a);
this.T.connect(this.b);this.T.connect(this.Xa);this.Xa.connect(this.T);this.s.connect(this.G);this.G.connect(this.T.delayTime);this.s.start(0)}c(){this.s.stop(0);this.l.disconnect();this.T.disconnect();this.s.disconnect();this.G.disconnect();this.a.disconnect();this.b.disconnect();this.Xa.disconnect();super.c()}R(a){this.b.disconnect();this.b.connect(a);this.a.disconnect();this.a.connect(a)}O(){return this.l}X(a,b,d,f){switch(a){case 0:b=Math.max(Math.min(b/100,1),0);this.g[4]=b;this.m(this.b.gain,
b/2,d,f);this.m(this.a.gain,1-b/2,d,f);break;case 6:this.g[1]=b/1E3;this.m(this.G.gain,b/1E3,d,f);break;case 7:this.g[2]=b;this.m(this.s.frequency,b,d,f);break;case 8:this.g[3]=b/100,this.m(this.Xa.gain,b/100,d,f)}}};self.he=class extends h{constructor(a,b,d,f,n,q,r){super(a);this.P="phaser";this.g=[b,d,f,n,q,r];this.l=this.o();this.a=this.o();this.a.gain.value=1-r/2;this.b=this.o();this.b.gain.value=r/2;this.u=this.f.createBiquadFilter();this.u.type="allpass";this.u.frequency.value=b;this.u.detune.value=
d;this.u.Q.value=f;this.s=this.f.createOscillator();this.s.frequency.value=q;this.G=this.o();this.G.gain.value=n;this.l.connect(this.u);this.l.connect(this.a);this.u.connect(this.b);this.s.connect(this.G);this.G.connect(this.u.frequency);this.s.start(0)}c(){this.s.stop(0);this.l.disconnect();this.u.disconnect();this.s.disconnect();this.G.disconnect();this.a.disconnect();this.b.disconnect();super.c()}R(a){this.b.disconnect();this.b.connect(a);this.a.disconnect();this.a.connect(a)}O(){return this.l}X(a,
b,d,f){switch(a){case 0:b=Math.max(Math.min(b/100,1),0);this.g[5]=b;this.m(this.b.gain,b/2,d,f);this.m(this.a.gain,1-b/2,d,f);break;case 1:this.g[0]=b;this.m(this.u.frequency,b,d,f);break;case 2:this.g[1]=b;this.m(this.u.detune,b,d,f);break;case 3:this.g[2]=b;this.m(this.u.Q,b,d,f);break;case 6:this.g[3]=b;this.m(this.G.gain,b,d,f);break;case 7:this.g[4]=b,this.m(this.s.frequency,b,d,f)}}};self.ge=class extends h{constructor(a,b){super(a);this.P="gain";this.g=[b];this.h=this.o();this.h.gain.value=
b}c(){this.h.disconnect();super.c()}R(a){this.h.disconnect();this.h.connect(a)}O(){return this.h}X(a,b,d,f){const n=self.da.bd;switch(a){case 4:this.g[0]=n(b),this.m(this.h.gain,n(b),d,f)}}};self.je=class extends h{constructor(a,b,d){super(a);this.P="tremolo";this.g=[b,d];this.h=this.o();this.h.gain.value=1-d/2;this.s=this.f.createOscillator();this.s.frequency.value=b;this.G=this.o();this.G.gain.value=d/2;this.s.connect(this.G);this.G.connect(this.h.gain);this.s.start(0)}c(){this.s.stop(0);this.s.disconnect();
this.G.disconnect();this.h.disconnect();super.c()}R(a){this.h.disconnect();this.h.connect(a)}O(){return this.h}X(a,b,d,f){switch(a){case 0:b=Math.max(Math.min(b/100,1),0);this.g[1]=b;this.m(this.h.gain.value,1-b/2,d,f);this.m(this.G.gain.value,b/2,d,f);break;case 7:this.g[0]=b,this.m(this.s.frequency,b,d,f)}}};self.ie=class extends h{constructor(a,b,d){super(a);this.P="ringmod";this.g=[b,d];this.l=this.o();this.b=this.o();this.b.gain.value=d;this.a=this.o();this.a.gain.value=1-d;this.jb=this.o();
this.jb.gain.value=0;this.s=this.f.createOscillator();this.s.frequency.value=b;this.s.connect(this.jb.gain);this.s.start(0);this.l.connect(this.jb);this.l.connect(this.a);this.jb.connect(this.b)}c(){this.s.stop(0);this.s.disconnect();this.jb.disconnect();this.l.disconnect();this.b.disconnect();this.a.disconnect();super.c()}R(a){this.b.disconnect();this.b.connect(a);this.a.disconnect();this.a.connect(a)}O(){return this.l}X(a,b,d,f){switch(a){case 0:b=Math.max(Math.min(b/100,1),0);this.g[1]=b;this.m(this.b.gain,
b,d,f);this.m(this.a.gain,1-b,d,f);break;case 7:this.g[0]=b,this.m(this.s.frequency,b,d,f)}}};self.de=class extends h{constructor(a,b,d,f,n,q){super(a);this.P="distortion";this.g=[b,d,f,n,q];this.l=this.o();this.Qb=this.o();this.Pb=this.o();this.bg(f,n);this.b=this.o();this.b.gain.value=q;this.a=this.o();this.a.gain.value=1-q;this.Ub=this.f.createWaveShaper();this.Ec=new Float32Array(65536);this.ef(b,d);this.Ub.curve=this.Ec;this.l.connect(this.Qb);this.l.connect(this.a);this.Qb.connect(this.Ub);
this.Ub.connect(this.Pb);this.Pb.connect(this.b)}c(){this.l.disconnect();this.Qb.disconnect();this.Ub.disconnect();this.Pb.disconnect();this.b.disconnect();this.a.disconnect();super.c()}bg(a,b){.01>a&&(a=.01);this.Qb.gain.value=a;this.Pb.gain.value=Math.pow(1/a,.6)*b}ef(a,b){for(let d=0;32768>d;++d){let f=d/32768;f=this.og(f,a,b);this.Ec[32768+d]=f;this.Ec[32768-d-1]=-f}}og(a,b,d){d=1.05*d*b-b;const f=0>a?-a:a;return(f<b?f:b+d*self.da.Kg(f-b,1/d))*(0>a?-1:1)}R(a){this.b.disconnect();this.b.connect(a);
this.a.disconnect();this.a.connect(a)}O(){return this.l}X(a,b,d,f){switch(a){case 0:b=Math.max(Math.min(b/100,1),0),this.g[4]=b,this.m(this.b.gain,b,d,f),this.m(this.a.gain,1-b,d,f)}}};self.ae=class extends h{constructor(a,b,d,f,n,q){super(a);this.P="compressor";this.g=[b,d,f,n,q];this.h=this.f.createDynamicsCompressor();this.h.threshold.value=b;this.h.knee.value=d;this.h.ratio.value=f;this.h.attack.value=n;this.h.release.value=q}c(){this.h.disconnect();super.c()}R(a){this.h.disconnect();this.h.connect(a)}O(){return this.h}X(){}};
self.$d=class extends h{constructor(a,b,d){super(a);this.P="analyser";this.g=[b,d];this.h=this.f.createAnalyser();this.h.fftSize=b;this.h.smoothingTimeConstant=d;this.Hd=new Float32Array(this.h.frequencyBinCount);this.Td=new Uint8Array(b);this.Rd=this.Ha=0;this.i.Me(this)}c(){this.i.Vf(this);this.h.disconnect();super.c()}Ba(){this.h.getFloatFrequencyData(this.Hd);this.h.getByteTimeDomainData(this.Td);const a=this.h.fftSize;let b=this.Ha=0;for(var d=0;d<a;++d){let f=(this.Td[d]-128)/128;0>f&&(f=-f);
this.Ha<f&&(this.Ha=f);b+=f*f}d=self.da.Ce;this.Ha=d(this.Ha);this.Rd=d(Math.sqrt(b/a))}R(a){this.h.disconnect();this.h.connect(a)}O(){return this.h}X(){}te(){return{tag:this.Z,index:this.Jd,peak:this.Ha,rms:this.Rd,binCount:this.h.frequencyBinCount,freqBins:this.Hd}}}};